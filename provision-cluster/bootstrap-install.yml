---
- name: Prepare OSEv3 Hosts
  hosts: OSEv3
  pre_tasks:
  - name: Load dynamic config
    import_tasks: ../load-dynamic-config.yml
  roles:
  - role: node-prep

- import_playbook: >-
    {{ openshift_ansible_location }}/playbooks/prerequisites.yml

# Import playbook list from openshift-ansible/playbooks/deploy_cluster.yml
- import_playbook: >-
    {{ openshift_ansible_location }}/playbooks/init/main.yml
  vars:
    l_networkman_check_hosts: "oo_nodes_to_config"

- import_playbook: >-
    {{ openshift_ansible_location }}/playbooks/openshift-checks/private/install.yml

- import_playbook: >-
    {{ openshift_ansible_location }}/playbooks/openshift-node/private/bootstrap.yml

- import_playbook: >-
    {{ openshift_ansible_location }}/playbooks/common/private/control_plane.yml

- import_playbook: >-
    {{ openshift_ansible_location }}/playbooks/openshift-node/private/join.yml
